/// <reference path="commons/subscriptions.service.ts" />
/// <reference path="../../typings/tsd.d.ts" />
var AngularTest;
(function (AngularTest) {
    var RXInterceptor = (function () {
        function RXInterceptor(StreamsService) {
            this.StreamsService = StreamsService;
            this.response = function (response) {
                if (response.config.url.indexOf('api') !== -1) {
                    var _service = StreamsService;
                    var _stream = _service.getStream(response.config.url);
                    _stream.onNext({ type: response.config.method, data: response.data });
                }
                return response;
            };
            return;
        }
        RXInterceptor.$inject = ['StreamsService'];
        return RXInterceptor;
    })();
    AngularTest.RXInterceptor = RXInterceptor;
    function getInstance(StreamsService) {
        return new RXInterceptor(StreamsService);
    }
    AngularTest.getInstance = getInstance;
    angular.module('angularTest').factory('rxInterceptorFactory', getInstance);
})(AngularTest || (AngularTest = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmludGVyY2VwdG9ycy50cyJdLCJuYW1lcyI6WyJBbmd1bGFyVGVzdCIsIkFuZ3VsYXJUZXN0LlJYSW50ZXJjZXB0b3IiLCJBbmd1bGFyVGVzdC5SWEludGVyY2VwdG9yLmNvbnN0cnVjdG9yIiwiQW5ndWxhclRlc3QuZ2V0SW5zdGFuY2UiXSwibWFwcGluZ3MiOiJBQUFBLHlEQUF5RDtBQUN6RCwrQ0FBK0M7QUFFL0MsSUFBTyxXQUFXLENBNEJqQjtBQTVCRCxXQUFPLFdBQVcsRUFBQyxDQUFDO0lBRW5CQSxJQUFhQSxhQUFhQTtRQUV6QkMsU0FGWUEsYUFBYUEsQ0FFTEEsY0FBMENBO1lBQTFDQyxtQkFBY0EsR0FBZEEsY0FBY0EsQ0FBNEJBO1lBQzdEQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxVQUFDQSxRQUFRQTtnQkFDekJBLEVBQUVBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO29CQUMvQ0EsSUFBSUEsUUFBUUEsR0FBR0EsY0FBY0EsQ0FBQ0E7b0JBQzlCQSxJQUFJQSxPQUFPQSxHQUFHQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDdERBLE9BQU9BLENBQUNBLE1BQU1BLENBQUNBLEVBQUNBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLElBQUlBLEVBQUNBLENBQUNBLENBQUFBO2dCQUNwRUEsQ0FBQ0E7Z0JBQ0RBLE1BQU1BLENBQUNBLFFBQVFBLENBQUFBO1lBQ2hCQSxDQUFDQSxDQUFBQTtZQUVBQSxNQUFNQSxDQUFDQTtRQUNSQSxDQUFDQTtRQVpNRCxxQkFBT0EsR0FBa0JBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0E7UUFjcERBLG9CQUFDQTtJQUFEQSxDQWZBRCxBQWVDQyxJQUFBRDtJQWZZQSx5QkFBYUEsR0FBYkEsYUFlWkEsQ0FBQUE7SUFHREEsU0FBZ0JBLFdBQVdBLENBQUNBLGNBQTBDQTtRQUNyRUcsTUFBTUEsQ0FBQ0EsSUFBSUEsYUFBYUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQUE7SUFDekNBLENBQUNBO0lBRmVILHVCQUFXQSxHQUFYQSxXQUVmQSxDQUFBQTtJQUdEQSxPQUFPQSxDQUFDQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUMzQkEsT0FBT0EsQ0FBQ0Esc0JBQXNCQSxFQUFFQSxXQUFXQSxDQUFDQSxDQUFDQTtBQUVoREEsQ0FBQ0EsRUE1Qk0sV0FBVyxLQUFYLFdBQVcsUUE0QmpCIiwiZmlsZSI6ImluZGV4LmludGVyY2VwdG9ycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJjb21tb25zL3N1YnNjcmlwdGlvbnMuc2VydmljZS50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG5cbm1vZHVsZSBBbmd1bGFyVGVzdCB7XG5cblx0ZXhwb3J0IGNsYXNzIFJYSW50ZXJjZXB0b3Ige1xuXHRcdHN0YXRpYyAkaW5qZWN0OiBBcnJheTxzdHJpbmc+ID0gWydTdHJlYW1zU2VydmljZSddO1xuXHRcdGNvbnN0cnVjdG9yKHByaXZhdGUgU3RyZWFtc1NlcnZpY2U6IEFuZ3VsYXJUZXN0LlN0cmVhbXNTZXJ2aWNlKSB7XG5cdFx0XHR0aGlzLnJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHRpZiAocmVzcG9uc2UuY29uZmlnLnVybC5pbmRleE9mKCdhcGknKSAhPT0gLTEpIHtcblx0XHRcdFx0dmFyIF9zZXJ2aWNlID0gU3RyZWFtc1NlcnZpY2U7XG5cdFx0XHRcdHZhciBfc3RyZWFtID0gX3NlcnZpY2UuZ2V0U3RyZWFtKHJlc3BvbnNlLmNvbmZpZy51cmwpO1xuXHRcdFx0XHRfc3RyZWFtLm9uTmV4dCh7dHlwZTogcmVzcG9uc2UuY29uZmlnLm1ldGhvZCwgZGF0YTogcmVzcG9uc2UuZGF0YX0pXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2Vcblx0XHR9XG5cdFx0XHRcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0cmVzcG9uc2UgOiAocmVzcG9uc2UpID0+IHZvaWQ7XHRcblx0fVxuXG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGdldEluc3RhbmNlKFN0cmVhbXNTZXJ2aWNlOiBBbmd1bGFyVGVzdC5TdHJlYW1zU2VydmljZSkge1xuXHRcdHJldHVybiBuZXcgUlhJbnRlcmNlcHRvcihTdHJlYW1zU2VydmljZSlcblx0fVxuXG5cblx0YW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXJUZXN0Jylcblx0XHQuZmFjdG9yeSgncnhJbnRlcmNlcHRvckZhY3RvcnknLCBnZXRJbnN0YW5jZSk7XG5cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=