/// <reference path="../../../../../typings/tsd.d.ts" />
/// <reference path="../../../commons/subscriptions.service.ts" />
var AngularTest;
(function (AngularTest) {
    var Course;
    (function (Course) {
        'use strict';
        var CourseEditorController = (function () {
            function CourseEditorController(CourseService, StreamsService, $stateParams, TeacherService) {
                var _this = this;
                this.CourseService = CourseService;
                this.StreamsService = StreamsService;
                this.TeacherService = TeacherService;
                if ($stateParams['id']) {
                    CourseService.get({ id: $stateParams['id'] });
                    this.courseStream = StreamsService.getStream('/api/course/' + $stateParams['id']);
                    this.courseStream.subscribe(function (notification) {
                        _this.course = notification.data;
                    });
                }
                this.formFields = [
                    {
                        'templateOptions': {
                            'type': 'text',
                            'label': 'Name'
                        },
                        'type': 'input',
                        'key': 'name'
                    },
                    {
                        type: 'select',
                        key: 'teacher',
                        templateOptions: {
                            options: [
                                { 'sapo': 'pepe' },
                                { 'lalo': 'landa' }
                            ]
                        }
                    }
                ];
            }
            CourseEditorController.prototype.save = function () {
                if (this.course.id) {
                    this.CourseService.update(this.course);
                }
                else {
                    this.CourseService.save({
                        'name': this.course.name
                    });
                }
            };
            CourseEditorController.$inject = ['CourseService', 'StreamsService', '$stateParams', 'TeacherService'];
            return CourseEditorController;
        })();
        Course.CourseEditorController = CourseEditorController;
        angular.module('angularTest.course').controller('CourseEditorController', CourseEditorController);
    })(Course = AngularTest.Course || (AngularTest.Course = {}));
})(AngularTest || (AngularTest = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudGl0aWVzL2NvdXJzZS9lZGl0b3IvY291cnNlLmVkaXRvci5jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbIkFuZ3VsYXJUZXN0IiwiQW5ndWxhclRlc3QuQ291cnNlIiwiQW5ndWxhclRlc3QuQ291cnNlLkNvdXJzZUVkaXRvckNvbnRyb2xsZXIiLCJBbmd1bGFyVGVzdC5Db3Vyc2UuQ291cnNlRWRpdG9yQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsIkFuZ3VsYXJUZXN0LkNvdXJzZS5Db3Vyc2VFZGl0b3JDb250cm9sbGVyLnNhdmUiXSwibWFwcGluZ3MiOiJBQUFBLHdEQUF3RDtBQUN4RCxrRUFBa0U7QUFFbEUsSUFBTyxXQUFXLENBNERqQjtBQTVERCxXQUFPLFdBQVc7SUFBQ0EsSUFBQUEsTUFBTUEsQ0E0RHhCQTtJQTVEa0JBLFdBQUFBLE1BQU1BLEVBQUNBLENBQUNBO1FBQ3ZCQyxZQUFZQSxDQUFDQTtRQUViQSxJQUFhQSxzQkFBc0JBO1lBVS9CQyxTQVZTQSxzQkFBc0JBLENBVVpBLGFBQWFBLEVBQVVBLGNBQThCQSxFQUNwRUEsWUFBdUNBLEVBQVNBLGNBQWNBO2dCQVh0RUMsaUJBcURDQTtnQkEzQ3NCQSxrQkFBYUEsR0FBYkEsYUFBYUEsQ0FBQUE7Z0JBQVVBLG1CQUFjQSxHQUFkQSxjQUFjQSxDQUFnQkE7Z0JBQ3BCQSxtQkFBY0EsR0FBZEEsY0FBY0EsQ0FBQUE7Z0JBRTlEQSxFQUFFQSxDQUFDQSxDQUFDQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDckJBLGFBQWFBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO29CQUM5Q0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FDYkEsY0FBY0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsY0FBY0EsR0FBR0EsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQ2xFQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFDQSxZQUFZQTt3QkFDckNBLEtBQUlBLENBQUNBLE1BQU1BLEdBQUdBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBO29CQUNwQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLENBQUNBO2dCQUVEQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQTtvQkFDZEE7d0JBQ0lBLGlCQUFpQkEsRUFBRUE7NEJBQ2ZBLE1BQU1BLEVBQUVBLE1BQU1BOzRCQUNkQSxPQUFPQSxFQUFFQSxNQUFNQTt5QkFDbEJBO3dCQUNEQSxNQUFNQSxFQUFFQSxPQUFPQTt3QkFDZkEsS0FBS0EsRUFBRUEsTUFBTUE7cUJBQ2hCQTtvQkFDREE7d0JBQ0lBLElBQUlBLEVBQUVBLFFBQVFBO3dCQUNkQSxHQUFHQSxFQUFFQSxTQUFTQTt3QkFDZEEsZUFBZUEsRUFBRUE7NEJBQ2JBLE9BQU9BLEVBQUVBO2dDQUNMQSxFQUFDQSxNQUFNQSxFQUFFQSxNQUFNQSxFQUFDQTtnQ0FDaEJBLEVBQUNBLE1BQU1BLEVBQUVBLE9BQU9BLEVBQUNBOzZCQUNwQkE7eUJBQ0pBO3FCQUNKQTtpQkFDSkEsQ0FBQ0E7WUFDTkEsQ0FBQ0E7WUFFREQscUNBQUlBLEdBQUpBO2dCQUNJRSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDakJBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO2dCQUMzQ0EsQ0FBQ0E7Z0JBQUNBLElBQUlBLENBQUNBLENBQUNBO29CQUNKQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQTt3QkFDcEJBLE1BQU1BLEVBQUVBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBO3FCQUMzQkEsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLENBQUNBO1lBQ0xBLENBQUNBO1lBbERNRiw4QkFBT0EsR0FBa0JBLENBQUNBLGVBQWVBLEVBQUVBLGdCQUFnQkEsRUFBRUEsY0FBY0EsRUFBRUEsZ0JBQWdCQSxDQUFDQSxDQUFDQTtZQW1EMUdBLDZCQUFDQTtRQUFEQSxDQXJEQUQsQUFxRENDLElBQUFEO1FBckRZQSw2QkFBc0JBLEdBQXRCQSxzQkFxRFpBLENBQUFBO1FBRURBLE9BQU9BLENBQUNBLE1BQU1BLENBQUNBLG9CQUFvQkEsQ0FBQ0EsQ0FDL0JBLFVBQVVBLENBQUNBLHdCQUF3QkEsRUFBRUEsc0JBQXNCQSxDQUFDQSxDQUFDQTtJQUN0RUEsQ0FBQ0EsRUE1RGtCRCxNQUFNQSxHQUFOQSxrQkFBTUEsS0FBTkEsa0JBQU1BLFFBNER4QkE7QUFBREEsQ0FBQ0EsRUE1RE0sV0FBVyxLQUFYLFdBQVcsUUE0RGpCIiwiZmlsZSI6ImVudGl0aWVzL2NvdXJzZS9lZGl0b3IvY291cnNlLmVkaXRvci5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL2NvbW1vbnMvc3Vic2NyaXB0aW9ucy5zZXJ2aWNlLnRzXCIgLz5cblxubW9kdWxlIEFuZ3VsYXJUZXN0LkNvdXJzZSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZXhwb3J0IGNsYXNzIENvdXJzZUVkaXRvckNvbnRyb2xsZXIge1xuXG4gICAgICAgIHN0YXRpYyAkaW5qZWN0OiBBcnJheTxzdHJpbmc+ID0gWydDb3Vyc2VTZXJ2aWNlJywgJ1N0cmVhbXNTZXJ2aWNlJywgJyRzdGF0ZVBhcmFtcycsICdUZWFjaGVyU2VydmljZSddO1xuICAgIFxuICAgICAgICBwdWJsaWMgY291cnNlO1xuICAgIFxuICAgICAgICBwdWJsaWMgZm9ybUZpZWxkcztcbiAgICBcbiAgICAgICAgcHVibGljIGNvdXJzZVN0cmVhbTtcbiAgICBcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIENvdXJzZVNlcnZpY2UsIHByaXZhdGUgU3RyZWFtc1NlcnZpY2U6IFN0cmVhbXNTZXJ2aWNlLFxuICAgICAgICAgICAgJHN0YXRlUGFyYW1zOiBuZy51aS5JU3RhdGVQYXJhbXNTZXJ2aWNlLCBwdWJsaWMgVGVhY2hlclNlcnZpY2UpIHtcblxuICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtc1snaWQnXSkge1xuICAgICAgICAgICAgICAgIENvdXJzZVNlcnZpY2UuZ2V0KHsgaWQ6ICRzdGF0ZVBhcmFtc1snaWQnXSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZVN0cmVhbSA9IFxuICAgICAgICAgICAgICAgICAgICBTdHJlYW1zU2VydmljZS5nZXRTdHJlYW0oJy9hcGkvY291cnNlLycgKyAkc3RhdGVQYXJhbXNbJ2lkJ10pO1xuICAgICAgICAgICAgICAgIHRoaXMuY291cnNlU3RyZWFtLnN1YnNjcmliZSgobm90aWZpY2F0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291cnNlID0gbm90aWZpY2F0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZm9ybUZpZWxkcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICd0ZW1wbGF0ZU9wdGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCc6ICdOYW1lJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICdrZXknOiAnbmFtZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RlYWNoZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J3NhcG8nOiAncGVwZSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnbGFsbyc6ICdsYW5kYSd9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHNhdmUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3Vyc2UuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkNvdXJzZVNlcnZpY2UudXBkYXRlKHRoaXMuY291cnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5Db3Vyc2VTZXJ2aWNlLnNhdmUoe1xuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMuY291cnNlLm5hbWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBhbmd1bGFyLm1vZHVsZSgnYW5ndWxhclRlc3QuY291cnNlJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NvdXJzZUVkaXRvckNvbnRyb2xsZXInLCBDb3Vyc2VFZGl0b3JDb250cm9sbGVyKTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=